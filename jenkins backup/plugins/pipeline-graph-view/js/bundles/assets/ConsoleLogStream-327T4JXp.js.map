{"version":3,"file":"ConsoleLogStream-327T4JXp.js","sources":["../../../../../../node_modules/linkify-html/dist/linkify-html.mjs","../../../../frontend/pipeline-console-view/pipeline-console/main/Ansi.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/ConsoleLine.tsx","../../../../frontend/pipeline-console-view/pipeline-console/main/ConsoleLogStream.tsx"],"sourcesContent":["import { Options, tokenize as tokenize$1 } from 'linkifyjs';\n\n/**\n * generated from https://raw.githubusercontent.com/w3c/html/26b5126f96f736f796b9e29718138919dd513744/entities.json\n * do not edit\n */\nvar HTML5NamedCharRefs = {\n  // We don't need the complete named character reference because linkifyHtml\n  // does not modify the escape sequences. We do need &nbsp; so that\n  // whitespace is parsed properly. Other types of whitespace should already\n  // be accounted for. &gt; &lt; and &quot; are also frequently relevant ones\n  amp: \"&\",\n  gt: \">\",\n  lt: \"<\",\n  nbsp: \"Â \",\n  quot: \"\\\"\"\n};\nvar HEXCHARCODE = /^#[xX]([A-Fa-f0-9]+)$/;\nvar CHARCODE = /^#([0-9]+)$/;\nvar NAMED = /^([A-Za-z0-9]+)$/;\nvar EntityParser = /** @class */function () {\n  function EntityParser(named) {\n    this.named = named;\n  }\n  EntityParser.prototype.parse = function (entity) {\n    if (!entity) {\n      return;\n    }\n    var matches = entity.match(HEXCHARCODE);\n    if (matches) {\n      return String.fromCharCode(parseInt(matches[1], 16));\n    }\n    matches = entity.match(CHARCODE);\n    if (matches) {\n      return String.fromCharCode(parseInt(matches[1], 10));\n    }\n    matches = entity.match(NAMED);\n    if (matches) {\n      return this.named[matches[1]] || \"&\" + matches[1] + \";\";\n    }\n  };\n  return EntityParser;\n}();\nvar WSP = /[\\t\\n\\f ]/;\nvar ALPHA = /[A-Za-z]/;\nvar CRLF = /\\r\\n?/g;\nfunction isSpace(char) {\n  return WSP.test(char);\n}\nfunction isAlpha(char) {\n  return ALPHA.test(char);\n}\nfunction preprocessInput(input) {\n  return input.replace(CRLF, '\\n');\n}\nvar EventedTokenizer = /** @class */function () {\n  function EventedTokenizer(delegate, entityParser, mode) {\n    if (mode === void 0) {\n      mode = 'precompile';\n    }\n    this.delegate = delegate;\n    this.entityParser = entityParser;\n    this.mode = mode;\n    this.state = \"beforeData\" /* beforeData */;\n    this.line = -1;\n    this.column = -1;\n    this.input = '';\n    this.index = -1;\n    this.tagNameBuffer = '';\n    this.states = {\n      beforeData: function () {\n        var char = this.peek();\n        if (char === '<' && !this.isIgnoredEndTag()) {\n          this.transitionTo(\"tagOpen\" /* tagOpen */);\n          this.markTagStart();\n          this.consume();\n        } else {\n          if (this.mode === 'precompile' && char === '\\n') {\n            var tag = this.tagNameBuffer.toLowerCase();\n            if (tag === 'pre' || tag === 'textarea') {\n              this.consume();\n            }\n          }\n          this.transitionTo(\"data\" /* data */);\n          this.delegate.beginData();\n        }\n      },\n      data: function () {\n        var char = this.peek();\n        var tag = this.tagNameBuffer;\n        if (char === '<' && !this.isIgnoredEndTag()) {\n          this.delegate.finishData();\n          this.transitionTo(\"tagOpen\" /* tagOpen */);\n          this.markTagStart();\n          this.consume();\n        } else if (char === '&' && tag !== 'script' && tag !== 'style') {\n          this.consume();\n          this.delegate.appendToData(this.consumeCharRef() || '&');\n        } else {\n          this.consume();\n          this.delegate.appendToData(char);\n        }\n      },\n      tagOpen: function () {\n        var char = this.consume();\n        if (char === '!') {\n          this.transitionTo(\"markupDeclarationOpen\" /* markupDeclarationOpen */);\n        } else if (char === '/') {\n          this.transitionTo(\"endTagOpen\" /* endTagOpen */);\n        } else if (char === '@' || char === ':' || isAlpha(char)) {\n          this.transitionTo(\"tagName\" /* tagName */);\n          this.tagNameBuffer = '';\n          this.delegate.beginStartTag();\n          this.appendToTagName(char);\n        }\n      },\n      markupDeclarationOpen: function () {\n        var char = this.consume();\n        if (char === '-' && this.peek() === '-') {\n          this.consume();\n          this.transitionTo(\"commentStart\" /* commentStart */);\n          this.delegate.beginComment();\n        } else {\n          var maybeDoctype = char.toUpperCase() + this.input.substring(this.index, this.index + 6).toUpperCase();\n          if (maybeDoctype === 'DOCTYPE') {\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n            this.transitionTo(\"doctype\" /* doctype */);\n            if (this.delegate.beginDoctype) this.delegate.beginDoctype();\n          }\n        }\n      },\n      doctype: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          this.transitionTo(\"beforeDoctypeName\" /* beforeDoctypeName */);\n        }\n      },\n      beforeDoctypeName: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          return;\n        } else {\n          this.transitionTo(\"doctypeName\" /* doctypeName */);\n          if (this.delegate.appendToDoctypeName) this.delegate.appendToDoctypeName(char.toLowerCase());\n        }\n      },\n      doctypeName: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          this.transitionTo(\"afterDoctypeName\" /* afterDoctypeName */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          if (this.delegate.appendToDoctypeName) this.delegate.appendToDoctypeName(char.toLowerCase());\n        }\n      },\n      afterDoctypeName: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          return;\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          var nextSixChars = char.toUpperCase() + this.input.substring(this.index, this.index + 5).toUpperCase();\n          var isPublic = nextSixChars.toUpperCase() === 'PUBLIC';\n          var isSystem = nextSixChars.toUpperCase() === 'SYSTEM';\n          if (isPublic || isSystem) {\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n          }\n          if (isPublic) {\n            this.transitionTo(\"afterDoctypePublicKeyword\" /* afterDoctypePublicKeyword */);\n          } else if (isSystem) {\n            this.transitionTo(\"afterDoctypeSystemKeyword\" /* afterDoctypeSystemKeyword */);\n          }\n        }\n      },\n      afterDoctypePublicKeyword: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.transitionTo(\"beforeDoctypePublicIdentifier\" /* beforeDoctypePublicIdentifier */);\n          this.consume();\n        } else if (char === '\"') {\n          this.transitionTo(\"doctypePublicIdentifierDoubleQuoted\" /* doctypePublicIdentifierDoubleQuoted */);\n          this.consume();\n        } else if (char === \"'\") {\n          this.transitionTo(\"doctypePublicIdentifierSingleQuoted\" /* doctypePublicIdentifierSingleQuoted */);\n          this.consume();\n        } else if (char === '>') {\n          this.consume();\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        }\n      },\n      doctypePublicIdentifierDoubleQuoted: function () {\n        var char = this.consume();\n        if (char === '\"') {\n          this.transitionTo(\"afterDoctypePublicIdentifier\" /* afterDoctypePublicIdentifier */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          if (this.delegate.appendToDoctypePublicIdentifier) this.delegate.appendToDoctypePublicIdentifier(char);\n        }\n      },\n      doctypePublicIdentifierSingleQuoted: function () {\n        var char = this.consume();\n        if (char === \"'\") {\n          this.transitionTo(\"afterDoctypePublicIdentifier\" /* afterDoctypePublicIdentifier */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          if (this.delegate.appendToDoctypePublicIdentifier) this.delegate.appendToDoctypePublicIdentifier(char);\n        }\n      },\n      afterDoctypePublicIdentifier: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          this.transitionTo(\"betweenDoctypePublicAndSystemIdentifiers\" /* betweenDoctypePublicAndSystemIdentifiers */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else if (char === '\"') {\n          this.transitionTo(\"doctypeSystemIdentifierDoubleQuoted\" /* doctypeSystemIdentifierDoubleQuoted */);\n        } else if (char === \"'\") {\n          this.transitionTo(\"doctypeSystemIdentifierSingleQuoted\" /* doctypeSystemIdentifierSingleQuoted */);\n        }\n      },\n      betweenDoctypePublicAndSystemIdentifiers: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          return;\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else if (char === '\"') {\n          this.transitionTo(\"doctypeSystemIdentifierDoubleQuoted\" /* doctypeSystemIdentifierDoubleQuoted */);\n        } else if (char === \"'\") {\n          this.transitionTo(\"doctypeSystemIdentifierSingleQuoted\" /* doctypeSystemIdentifierSingleQuoted */);\n        }\n      },\n      doctypeSystemIdentifierDoubleQuoted: function () {\n        var char = this.consume();\n        if (char === '\"') {\n          this.transitionTo(\"afterDoctypeSystemIdentifier\" /* afterDoctypeSystemIdentifier */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          if (this.delegate.appendToDoctypeSystemIdentifier) this.delegate.appendToDoctypeSystemIdentifier(char);\n        }\n      },\n      doctypeSystemIdentifierSingleQuoted: function () {\n        var char = this.consume();\n        if (char === \"'\") {\n          this.transitionTo(\"afterDoctypeSystemIdentifier\" /* afterDoctypeSystemIdentifier */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          if (this.delegate.appendToDoctypeSystemIdentifier) this.delegate.appendToDoctypeSystemIdentifier(char);\n        }\n      },\n      afterDoctypeSystemIdentifier: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          return;\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        }\n      },\n      commentStart: function () {\n        var char = this.consume();\n        if (char === '-' && this.peek() === '-') {\n          this.transitionTo(\"commentStartDash\" /* commentStartDash */);\n        } else if (char === '>') {\n          this.delegate.finishComment();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.delegate.appendToCommentData(char);\n          this.transitionTo(\"comment\" /* comment */);\n        }\n      },\n      commentStartDash: function () {\n        var char = this.consume();\n        if (char === '-') {\n          this.transitionTo(\"commentEnd\" /* commentEnd */);\n        } else if (char === '>') {\n          this.delegate.finishComment();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.delegate.appendToCommentData('-');\n          this.transitionTo(\"comment\" /* comment */);\n        }\n      },\n      comment: function () {\n        var char = this.consume();\n        if (char === '-') {\n          this.transitionTo(\"commentEndDash\" /* commentEndDash */);\n        } else {\n          this.delegate.appendToCommentData(char);\n        }\n      },\n      commentEndDash: function () {\n        var char = this.consume();\n        if (char === '-' && this.peek() === '-') {\n          this.delegate.appendToCommentData(char);\n        } else if (char === '-') {\n          this.transitionTo(\"commentEnd\" /* commentEnd */);\n        } else {\n          this.delegate.appendToCommentData('-' + char);\n          this.transitionTo(\"comment\" /* comment */);\n        }\n      },\n      commentEnd: function () {\n        var char = this.consume();\n        if (char === '>') {\n          this.delegate.finishComment();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.delegate.appendToCommentData('--' + char);\n          this.transitionTo(\"comment\" /* comment */);\n        }\n      },\n      tagName: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n        } else if (char === '/') {\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n        } else if (char === '>') {\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.appendToTagName(char);\n        }\n      },\n      endTagName: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n          this.tagNameBuffer = '';\n        } else if (char === '/') {\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n          this.tagNameBuffer = '';\n        } else if (char === '>') {\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n          this.tagNameBuffer = '';\n        } else {\n          this.appendToTagName(char);\n        }\n      },\n      beforeAttributeName: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.consume();\n          return;\n        } else if (char === '/') {\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n          this.consume();\n        } else if (char === '>') {\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else if (char === '=') {\n          this.delegate.reportSyntaxError('attribute name cannot start with equals sign');\n          this.transitionTo(\"attributeName\" /* attributeName */);\n          this.delegate.beginAttribute();\n          this.consume();\n          this.delegate.appendToAttributeName(char);\n        } else {\n          this.transitionTo(\"attributeName\" /* attributeName */);\n          this.delegate.beginAttribute();\n        }\n      },\n      attributeName: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.transitionTo(\"afterAttributeName\" /* afterAttributeName */);\n          this.consume();\n        } else if (char === '/') {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n        } else if (char === '=') {\n          this.transitionTo(\"beforeAttributeValue\" /* beforeAttributeValue */);\n          this.consume();\n        } else if (char === '>') {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else if (char === '\"' || char === \"'\" || char === '<') {\n          this.delegate.reportSyntaxError(char + ' is not a valid character within attribute names');\n          this.consume();\n          this.delegate.appendToAttributeName(char);\n        } else {\n          this.consume();\n          this.delegate.appendToAttributeName(char);\n        }\n      },\n      afterAttributeName: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.consume();\n          return;\n        } else if (char === '/') {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n        } else if (char === '=') {\n          this.consume();\n          this.transitionTo(\"beforeAttributeValue\" /* beforeAttributeValue */);\n        } else if (char === '>') {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.transitionTo(\"attributeName\" /* attributeName */);\n          this.delegate.beginAttribute();\n          this.consume();\n          this.delegate.appendToAttributeName(char);\n        }\n      },\n      beforeAttributeValue: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.consume();\n        } else if (char === '\"') {\n          this.transitionTo(\"attributeValueDoubleQuoted\" /* attributeValueDoubleQuoted */);\n          this.delegate.beginAttributeValue(true);\n          this.consume();\n        } else if (char === \"'\") {\n          this.transitionTo(\"attributeValueSingleQuoted\" /* attributeValueSingleQuoted */);\n          this.delegate.beginAttributeValue(true);\n          this.consume();\n        } else if (char === '>') {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.transitionTo(\"attributeValueUnquoted\" /* attributeValueUnquoted */);\n          this.delegate.beginAttributeValue(false);\n          this.consume();\n          this.delegate.appendToAttributeValue(char);\n        }\n      },\n      attributeValueDoubleQuoted: function () {\n        var char = this.consume();\n        if (char === '\"') {\n          this.delegate.finishAttributeValue();\n          this.transitionTo(\"afterAttributeValueQuoted\" /* afterAttributeValueQuoted */);\n        } else if (char === '&') {\n          this.delegate.appendToAttributeValue(this.consumeCharRef() || '&');\n        } else {\n          this.delegate.appendToAttributeValue(char);\n        }\n      },\n      attributeValueSingleQuoted: function () {\n        var char = this.consume();\n        if (char === \"'\") {\n          this.delegate.finishAttributeValue();\n          this.transitionTo(\"afterAttributeValueQuoted\" /* afterAttributeValueQuoted */);\n        } else if (char === '&') {\n          this.delegate.appendToAttributeValue(this.consumeCharRef() || '&');\n        } else {\n          this.delegate.appendToAttributeValue(char);\n        }\n      },\n      attributeValueUnquoted: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n        } else if (char === '/') {\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n        } else if (char === '&') {\n          this.consume();\n          this.delegate.appendToAttributeValue(this.consumeCharRef() || '&');\n        } else if (char === '>') {\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.consume();\n          this.delegate.appendToAttributeValue(char);\n        }\n      },\n      afterAttributeValueQuoted: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.consume();\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n        } else if (char === '/') {\n          this.consume();\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n        } else if (char === '>') {\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n        }\n      },\n      selfClosingStartTag: function () {\n        var char = this.peek();\n        if (char === '>') {\n          this.consume();\n          this.delegate.markTagAsSelfClosing();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n        }\n      },\n      endTagOpen: function () {\n        var char = this.consume();\n        if (char === '@' || char === ':' || isAlpha(char)) {\n          this.transitionTo(\"endTagName\" /* endTagName */);\n          this.tagNameBuffer = '';\n          this.delegate.beginEndTag();\n          this.appendToTagName(char);\n        }\n      }\n    };\n    this.reset();\n  }\n  EventedTokenizer.prototype.reset = function () {\n    this.transitionTo(\"beforeData\" /* beforeData */);\n    this.input = '';\n    this.tagNameBuffer = '';\n    this.index = 0;\n    this.line = 1;\n    this.column = 0;\n    this.delegate.reset();\n  };\n  EventedTokenizer.prototype.transitionTo = function (state) {\n    this.state = state;\n  };\n  EventedTokenizer.prototype.tokenize = function (input) {\n    this.reset();\n    this.tokenizePart(input);\n    this.tokenizeEOF();\n  };\n  EventedTokenizer.prototype.tokenizePart = function (input) {\n    this.input += preprocessInput(input);\n    while (this.index < this.input.length) {\n      var handler = this.states[this.state];\n      if (handler !== undefined) {\n        handler.call(this);\n      } else {\n        throw new Error(\"unhandled state \" + this.state);\n      }\n    }\n  };\n  EventedTokenizer.prototype.tokenizeEOF = function () {\n    this.flushData();\n  };\n  EventedTokenizer.prototype.flushData = function () {\n    if (this.state === 'data') {\n      this.delegate.finishData();\n      this.transitionTo(\"beforeData\" /* beforeData */);\n    }\n  };\n  EventedTokenizer.prototype.peek = function () {\n    return this.input.charAt(this.index);\n  };\n  EventedTokenizer.prototype.consume = function () {\n    var char = this.peek();\n    this.index++;\n    if (char === '\\n') {\n      this.line++;\n      this.column = 0;\n    } else {\n      this.column++;\n    }\n    return char;\n  };\n  EventedTokenizer.prototype.consumeCharRef = function () {\n    var endIndex = this.input.indexOf(';', this.index);\n    if (endIndex === -1) {\n      return;\n    }\n    var entity = this.input.slice(this.index, endIndex);\n    var chars = this.entityParser.parse(entity);\n    if (chars) {\n      var count = entity.length;\n      // consume the entity chars\n      while (count) {\n        this.consume();\n        count--;\n      }\n      // consume the `;`\n      this.consume();\n      return chars;\n    }\n  };\n  EventedTokenizer.prototype.markTagStart = function () {\n    this.delegate.tagOpen();\n  };\n  EventedTokenizer.prototype.appendToTagName = function (char) {\n    this.tagNameBuffer += char;\n    this.delegate.appendToTagName(char);\n  };\n  EventedTokenizer.prototype.isIgnoredEndTag = function () {\n    var tag = this.tagNameBuffer;\n    return tag === 'title' && this.input.substring(this.index, this.index + 8) !== '</title>' || tag === 'style' && this.input.substring(this.index, this.index + 8) !== '</style>' || tag === 'script' && this.input.substring(this.index, this.index + 9) !== '</script>';\n  };\n  return EventedTokenizer;\n}();\nvar Tokenizer = /** @class */function () {\n  function Tokenizer(entityParser, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    this.options = options;\n    this.token = null;\n    this.startLine = 1;\n    this.startColumn = 0;\n    this.tokens = [];\n    this.tokenizer = new EventedTokenizer(this, entityParser, options.mode);\n    this._currentAttribute = undefined;\n  }\n  Tokenizer.prototype.tokenize = function (input) {\n    this.tokens = [];\n    this.tokenizer.tokenize(input);\n    return this.tokens;\n  };\n  Tokenizer.prototype.tokenizePart = function (input) {\n    this.tokens = [];\n    this.tokenizer.tokenizePart(input);\n    return this.tokens;\n  };\n  Tokenizer.prototype.tokenizeEOF = function () {\n    this.tokens = [];\n    this.tokenizer.tokenizeEOF();\n    return this.tokens[0];\n  };\n  Tokenizer.prototype.reset = function () {\n    this.token = null;\n    this.startLine = 1;\n    this.startColumn = 0;\n  };\n  Tokenizer.prototype.current = function () {\n    var token = this.token;\n    if (token === null) {\n      throw new Error('token was unexpectedly null');\n    }\n    if (arguments.length === 0) {\n      return token;\n    }\n    for (var i = 0; i < arguments.length; i++) {\n      if (token.type === arguments[i]) {\n        return token;\n      }\n    }\n    throw new Error(\"token type was unexpectedly \" + token.type);\n  };\n  Tokenizer.prototype.push = function (token) {\n    this.token = token;\n    this.tokens.push(token);\n  };\n  Tokenizer.prototype.currentAttribute = function () {\n    return this._currentAttribute;\n  };\n  Tokenizer.prototype.addLocInfo = function () {\n    if (this.options.loc) {\n      this.current().loc = {\n        start: {\n          line: this.startLine,\n          column: this.startColumn\n        },\n        end: {\n          line: this.tokenizer.line,\n          column: this.tokenizer.column\n        }\n      };\n    }\n    this.startLine = this.tokenizer.line;\n    this.startColumn = this.tokenizer.column;\n  };\n  // Data\n  Tokenizer.prototype.beginDoctype = function () {\n    this.push({\n      type: \"Doctype\" /* Doctype */,\n      name: ''\n    });\n  };\n  Tokenizer.prototype.appendToDoctypeName = function (char) {\n    this.current(\"Doctype\" /* Doctype */).name += char;\n  };\n  Tokenizer.prototype.appendToDoctypePublicIdentifier = function (char) {\n    var doctype = this.current(\"Doctype\" /* Doctype */);\n    if (doctype.publicIdentifier === undefined) {\n      doctype.publicIdentifier = char;\n    } else {\n      doctype.publicIdentifier += char;\n    }\n  };\n  Tokenizer.prototype.appendToDoctypeSystemIdentifier = function (char) {\n    var doctype = this.current(\"Doctype\" /* Doctype */);\n    if (doctype.systemIdentifier === undefined) {\n      doctype.systemIdentifier = char;\n    } else {\n      doctype.systemIdentifier += char;\n    }\n  };\n  Tokenizer.prototype.endDoctype = function () {\n    this.addLocInfo();\n  };\n  Tokenizer.prototype.beginData = function () {\n    this.push({\n      type: \"Chars\" /* Chars */,\n      chars: ''\n    });\n  };\n  Tokenizer.prototype.appendToData = function (char) {\n    this.current(\"Chars\" /* Chars */).chars += char;\n  };\n  Tokenizer.prototype.finishData = function () {\n    this.addLocInfo();\n  };\n  // Comment\n  Tokenizer.prototype.beginComment = function () {\n    this.push({\n      type: \"Comment\" /* Comment */,\n      chars: ''\n    });\n  };\n  Tokenizer.prototype.appendToCommentData = function (char) {\n    this.current(\"Comment\" /* Comment */).chars += char;\n  };\n  Tokenizer.prototype.finishComment = function () {\n    this.addLocInfo();\n  };\n  // Tags - basic\n  Tokenizer.prototype.tagOpen = function () {};\n  Tokenizer.prototype.beginStartTag = function () {\n    this.push({\n      type: \"StartTag\" /* StartTag */,\n      tagName: '',\n      attributes: [],\n      selfClosing: false\n    });\n  };\n  Tokenizer.prototype.beginEndTag = function () {\n    this.push({\n      type: \"EndTag\" /* EndTag */,\n      tagName: ''\n    });\n  };\n  Tokenizer.prototype.finishTag = function () {\n    this.addLocInfo();\n  };\n  Tokenizer.prototype.markTagAsSelfClosing = function () {\n    this.current(\"StartTag\" /* StartTag */).selfClosing = true;\n  };\n  // Tags - name\n  Tokenizer.prototype.appendToTagName = function (char) {\n    this.current(\"StartTag\" /* StartTag */, \"EndTag\" /* EndTag */).tagName += char;\n  };\n  // Tags - attributes\n  Tokenizer.prototype.beginAttribute = function () {\n    this._currentAttribute = ['', '', false];\n  };\n  Tokenizer.prototype.appendToAttributeName = function (char) {\n    this.currentAttribute()[0] += char;\n  };\n  Tokenizer.prototype.beginAttributeValue = function (isQuoted) {\n    this.currentAttribute()[2] = isQuoted;\n  };\n  Tokenizer.prototype.appendToAttributeValue = function (char) {\n    this.currentAttribute()[1] += char;\n  };\n  Tokenizer.prototype.finishAttributeValue = function () {\n    this.current(\"StartTag\" /* StartTag */).attributes.push(this._currentAttribute);\n  };\n  Tokenizer.prototype.reportSyntaxError = function (message) {\n    this.current().syntaxError = message;\n  };\n  return Tokenizer;\n}();\nfunction tokenize(input, options) {\n  var tokenizer = new Tokenizer(new EntityParser(HTML5NamedCharRefs), options);\n  return tokenizer.tokenize(input);\n}\n\nconst LinkifyResult = 'LinkifyResult';\nconst StartTag = 'StartTag';\nconst EndTag = 'EndTag';\nconst Chars = 'Chars';\nconst Comment = 'Comment';\nconst Doctype = 'Doctype';\n\n/**\n * @param {string} str html string to link\n * @param {import('linkifyjs').Opts} [opts] linkify options\n * @returns {string} resulting string\n */\nfunction linkifyHtml(str, opts = {}) {\n  // `tokens` and `token` in this section refer to tokens generated by the\n  // HTML parser, not linkify's parser\n  const tokens = tokenize(str);\n  const linkifiedTokens = [];\n  const linkified = [];\n  const options = new Options(opts, defaultRender);\n\n  // Linkify the tokens given by the parser\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    if (token.type === StartTag) {\n      linkifiedTokens.push(token);\n\n      // Ignore all the contents of ignored tags\n      const tagName = token.tagName.toUpperCase();\n      const isIgnored = tagName === 'A' || options.ignoreTags.indexOf(tagName) >= 0;\n      if (!isIgnored) {\n        continue;\n      }\n      let preskipLen = linkifiedTokens.length;\n      skipTagTokens(tagName, tokens, ++i, linkifiedTokens);\n      i += linkifiedTokens.length - preskipLen - 1;\n    } else if (token.type !== Chars) {\n      // Skip this token, it's not important\n      linkifiedTokens.push(token);\n    } else {\n      // Valid text token, linkify it!\n      const linkifedChars = linkifyChars(token.chars, options);\n      linkifiedTokens.push.apply(linkifiedTokens, linkifedChars);\n    }\n  }\n\n  // Convert the tokens back into a string\n  for (let i = 0; i < linkifiedTokens.length; i++) {\n    const token = linkifiedTokens[i];\n    switch (token.type) {\n      case LinkifyResult:\n        linkified.push(token.rendered);\n        break;\n      case StartTag:\n        {\n          let link = '<' + token.tagName;\n          if (token.attributes.length > 0) {\n            link += ' ' + attributeArrayToStrings(token.attributes).join(' ');\n          }\n          if (token.selfClosing) {\n            link += ' /';\n          }\n          link += '>';\n          linkified.push(link);\n          break;\n        }\n      case EndTag:\n        linkified.push(`</${token.tagName}>`);\n        break;\n      case Chars:\n        linkified.push(escapeText(token.chars));\n        break;\n      case Comment:\n        linkified.push(`<!--${escapeText(token.chars)}-->`);\n        break;\n      case Doctype:\n        {\n          let doctype = `<!DOCTYPE ${token.name}`;\n          if (token.publicIdentifier) {\n            doctype += ` PUBLIC \"${token.publicIdentifier}\"`;\n          }\n          if (token.systemIdentifier) {\n            doctype += ` \"${token.systemIdentifier}\"`;\n          }\n          doctype += '>';\n          linkified.push(doctype);\n          break;\n        }\n    }\n  }\n  return linkified.join('');\n}\n\n/**\n\t`tokens` and `token` in this section referes to tokens returned by\n\t`linkify.tokenize`. `linkified` will contain HTML Parser-style tokens\n\t@param {string}\n\t@param {import('linkifyjs').Options}\n*/\nfunction linkifyChars(str, options) {\n  const tokens = tokenize$1(str);\n  const result = [];\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    if (token.t === 'nl' && options.get('nl2br')) {\n      result.push({\n        type: StartTag,\n        tagName: 'br',\n        attributes: [],\n        selfClosing: true\n      });\n    } else if (!token.isLink || !options.check(token)) {\n      result.push({\n        type: Chars,\n        chars: token.toString()\n      });\n    } else {\n      result.push({\n        type: LinkifyResult,\n        rendered: options.render(token)\n      });\n    }\n  }\n  return result;\n}\n\n/**\n\tReturns a list of tokens skipped until the closing tag of tagName.\n\n\t* `tagName` is the closing tag which will prompt us to stop skipping\n\t* `tokens` is the array of tokens generated by HTML5Tokenizer which\n\t* `i` is the index immediately after the opening tag to skip\n\t* `skippedTokens` is an array which skipped tokens are being pushed into\n\n\tCaveats\n\n\t* Assumes that i is the first token after the given opening tagName\n\t* The closing tag will be skipped, but nothing after it\n\t* Will track whether there is a nested tag of the same type\n*/\nfunction skipTagTokens(tagName, tokens, i, skippedTokens) {\n  // number of tokens of this type on the [fictional] stack\n  let stackCount = 1;\n  while (i < tokens.length && stackCount > 0) {\n    let token = tokens[i];\n    if (token.type === StartTag && token.tagName.toUpperCase() === tagName) {\n      // Nested tag of the same type, \"add to stack\"\n      stackCount++;\n    } else if (token.type === EndTag && token.tagName.toUpperCase() === tagName) {\n      // Closing tag\n      stackCount--;\n    }\n    skippedTokens.push(token);\n    i++;\n  }\n\n  // Note that if stackCount > 0 here, the HTML is probably invalid\n  return skippedTokens;\n}\nfunction defaultRender({\n  tagName,\n  attributes,\n  content\n}) {\n  return `<${tagName} ${attributesToString(attributes)}>${escapeText(content)}</${tagName}>`;\n}\nfunction escapeText(text) {\n  return text.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\nfunction escapeAttr(attr) {\n  return attr.replace(/\"/g, '&quot;');\n}\nfunction attributesToString(attributes) {\n  const result = [];\n  for (const attr in attributes) {\n    const val = attributes[attr] + '';\n    result.push(`${attr}=\"${escapeAttr(val)}\"`);\n  }\n  return result.join(' ');\n}\nfunction attributeArrayToStrings(attrs) {\n  const attrStrs = [];\n  for (let i = 0; i < attrs.length; i++) {\n    const name = attrs[i][0];\n    const value = attrs[i][1] + '';\n    attrStrs.push(`${name}=\"${escapeAttr(value)}\"`);\n  }\n  return attrStrs;\n}\n\nexport { linkifyHtml as default };\n","export interface Result {\n  isSelectGraphicRendition?: boolean;\n  escapeCode?: string; // input\n  setFG?: number | false; // 0-7 if a foreground color is specified\n  setBG?: number | false; // 0-7 if a background color is specified\n  resetFG?: boolean; // true if contains a reset back to default foreground\n  resetBG?: boolean; // true if contains a reset back to default background\n  setBold?: boolean; // true if contains a bold font style\n  setFaint?: boolean; // true if contains a faint font style\n  setItalic?: boolean; // true if contains an italic font style\n  setUnderline?: boolean; // true if contains an underline font style\n  setStrikeThrough?: boolean; // true if contains a strike-through font style\n}\n\n/**\n * Parse an isolated escape code, looking for \"SelectGraphicsRendition\" codes specifically.\n *\n * Result:\n * ```\n * // Supported code\n * {\n *     isSelectGraphicRendition: true,\n *     escapeCode: string, // input\n *     setFG: integer | false, // 0-7 if a foreground color is specified\n *     setBG: integer | false, // 0-7 if a background color is specified\n *     resetFG: bool, // true if contains a reset back to default foreground\n *     resetBG: bool // true if contains a reset back to default background\n *     setBold: boolean, // true if contains a bold font style\n *     setFaint: boolean; // true if contains a faint font style\n *     setItalic: boolean; // true if contains an italic font style\n *     setUnderline: boolean, // true if contains an underline font style\n *     setStrikeThrough: boolean, // true if contains a strike-through font style\n * }\n *\n * // Unsupported or malformed code:\n * {\n *     isSelectGraphicRendition: false,\n *     escapeCode: string // input\n * }\n * ```\n */\nexport function parseEscapeCode(escapeCode: string): Result {\n  // eslint-disable-next-line no-control-regex\n  const graphicsPattern = /^\\u001b\\[([;0-9]*)m$/; // We only care about SGR codes\n\n  const result: Result = {\n    isSelectGraphicRendition: false, // True when is a color / font command\n    escapeCode,\n  };\n\n  const match = graphicsPattern.exec(escapeCode);\n\n  if (match) {\n    result.isSelectGraphicRendition = true;\n    result.setFG = false;\n    result.setBG = false;\n    result.resetFG = false;\n    result.resetBG = false;\n\n    // Convert param string to array<int> with length > 1\n    const params = (match[1] || \"\")\n      .split(\";\")\n      .map((str) => parseInt(str || \"0\"));\n\n    // Now go through the ints, decode them into bg/fg info\n    for (const num of params) {\n      if (num >= 30 && num <= 37) {\n        result.setFG = num - 30; // Normal FG set\n      } else if (num >= 40 && num <= 47) {\n        result.setBG = num - 40; // Normal BG set\n      } else if (num >= 90 && num <= 97) {\n        result.setFG = num - 90 + 8; // Bright FG set\n      } else if (num >= 100 && num <= 107) {\n        result.setBG = num - 100 + 8; // Bright BG set\n      } else if (num === 1) {\n        result.setBold = true;\n      } else if (num === 2) {\n        result.setFaint = true;\n      } else if (num === 22) {\n        result.setBold = false;\n        result.setFaint = false;\n      } else if (num === 3) {\n        result.setItalic = true;\n      } else if (num === 23) {\n        result.setItalic = false;\n      } else if (num === 4) {\n        result.setUnderline = true;\n      } else if (num === 24) {\n        result.setUnderline = false;\n      } else if (num === 9) {\n        result.setStrikeThrough = true;\n      } else if (num === 29) {\n        result.setStrikeThrough = false;\n      } else {\n        if (num === 39 || num === 0) {\n          result.resetFG = true;\n          result.setFG = false;\n        }\n\n        if (num === 49 || num === 0) {\n          result.resetBG = true;\n          result.setBG = false;\n        }\n\n        // ANSI code 0 should reset all formatting attributes\n        if (num === 0) {\n          result.setBold = false;\n          result.setFaint = false;\n          result.setItalic = false;\n          result.setUnderline = false;\n          result.setStrikeThrough = false;\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\n/**\n * Break up a string into an array of plain strings and escape codes. Returns [input] if no codes present.\n */\nexport function tokenizeANSIString(input?: string): string[] | Result[] {\n  if (typeof input !== \"string\") {\n    return [];\n  }\n\n  const len = input.length;\n\n  if (len === 0) {\n    return [];\n  }\n\n  /*\n    loopCounter         - Where should the next loop start looping for escape codes.\n    escapeCodeIndex     - The index in the string of the next ANSI escape code or -1.\n    parsedPointer       - The parse pointer how far in the string have we parsed.\n                          This will === loopCounter unless there are commented ANSI escape characters.\n    commentStartIndex   - The start index of the next comment block, or -1.\n    commentEndIndex     - The end index of the next comment block, or -1.\n  */\n  let loopCounter = 0;\n  let escapeCodeIndex = 0;\n  let parsedPointer = 0;\n  // comment start\n  let commentStartIndex = 0;\n  // comment end\n  let commentEndIndex = 0;\n  const result: string[] | Result[] = [];\n\n  while (loopCounter < len) {\n    //--------------------------------------------------------------------------\n    //  Find next escape code\n    escapeCodeIndex = input.indexOf(\"\\x1b\", loopCounter);\n\n    if (escapeCodeIndex === -1) {\n      // No more escape codes\n      break;\n    }\n\n    // Check if escape code is commented\n    commentStartIndex = input.indexOf(\"<!--\", loopCounter);\n    commentEndIndex = input.indexOf(\"-->\", commentStartIndex);\n    if (commentEndIndex !== -1) {\n      commentEndIndex += 3;\n    }\n    if (\n      escapeCodeIndex > commentStartIndex &&\n      escapeCodeIndex < commentEndIndex\n    ) {\n      // Skip past the comment\n      loopCounter = commentEndIndex;\n      continue;\n    }\n\n    //--------------------------------------------------------------------------\n    //  Capture any text between the start pointer and the escape code\n\n    if (escapeCodeIndex > loopCounter) {\n      result.push(input.substring(loopCounter, escapeCodeIndex));\n      loopCounter = escapeCodeIndex; // Advance our start pointer to the beginning of the escape code\n    }\n\n    //--------------------------------------------------------------------------\n    //  Find the end of the escape code (a char from 64 - 126 indicating command)\n\n    escapeCodeIndex += 2; // Skip past ESC and '['\n\n    let code = input.charCodeAt(escapeCodeIndex);\n    while (escapeCodeIndex < len && (code < 64 || code > 126)) {\n      escapeCodeIndex++;\n      code = input.charCodeAt(escapeCodeIndex);\n    }\n\n    //--------------------------------------------------------------------------\n    //  Create token for the escape code\n\n    // TODO fix type checking\n    const parsedEscapeCode: any = parseEscapeCode(\n      input.substring(loopCounter, escapeCodeIndex + 1),\n    );\n    result.push(parsedEscapeCode);\n\n    //--------------------------------------------------------------------------\n    //  Keep looking in the rest of the string\n\n    loopCounter = escapeCodeIndex + 1;\n    // Move parsedPointer as we have processes the text to this point.\n    parsedPointer = loopCounter;\n  }\n\n  if (parsedPointer < len) {\n    result.push(input.substr(parsedPointer));\n  }\n\n  return result;\n}\n\n/**\n * Takes an array of string snippets and parsed escape codes produced bv tokenizeANSIString, and creates\n * an array of strings and spans with classNames for attributes.\n */\nexport function makeReactChildren(\n  tokenizedInput: string[] | Result[],\n  key: string,\n) {\n  const result = [];\n  let currentState: Result = {\n    setFG: false,\n    setBG: false,\n    setBold: false,\n    setFaint: false,\n    setItalic: false,\n    setUnderline: false,\n    setStrikeThrough: false,\n  };\n\n  for (let i = 0; i < tokenizedInput.length; i++) {\n    const codeOrString = tokenizedInput[i];\n    if (typeof codeOrString === \"string\") {\n      // Need to output a <span> or plain text if there's no interesting current state\n      if (\n        !currentState.setFG &&\n        !currentState.setBG &&\n        !currentState.setBold &&\n        !currentState.setFaint &&\n        !currentState.setItalic &&\n        !currentState.setUnderline &&\n        !currentState.setStrikeThrough\n      ) {\n        result.push(\n          <div\n            dangerouslySetInnerHTML={{ __html: codeOrString }}\n            key={`${key}-${i}`}\n          />,\n        );\n      } else {\n        const classNames = [];\n\n        if (typeof currentState.setFG === \"number\") {\n          classNames.push(`ansi-fg-${currentState.setFG}`);\n        }\n        if (typeof currentState.setBG === \"number\") {\n          classNames.push(`ansi-bg-${currentState.setBG}`);\n        }\n        if (currentState.setBold) {\n          classNames.push(\"ansi-bold\");\n        }\n        if (currentState.setFaint) {\n          classNames.push(\"ansi-faint\");\n        }\n        if (currentState.setItalic) {\n          classNames.push(\"ansi-italic\");\n        }\n        if (currentState.setUnderline) {\n          classNames.push(\"ansi-underline\");\n        }\n        if (currentState.setStrikeThrough) {\n          classNames.push(\"ansi-strikethrough\");\n        }\n\n        result.push(\n          <span className={classNames.join(\" \")}>{codeOrString}</span>,\n        );\n      }\n    } else if (codeOrString.isSelectGraphicRendition) {\n      // Update the current FG / BG colors for the next text span\n      const nextState = { ...currentState };\n\n      if (codeOrString.resetFG) {\n        nextState.setFG = false;\n      }\n      if (codeOrString.resetBG) {\n        nextState.setBG = false;\n      }\n\n      if (typeof codeOrString.setFG === \"number\") {\n        nextState.setFG = codeOrString.setFG;\n      }\n      if (typeof codeOrString.setBG === \"number\") {\n        nextState.setBG = codeOrString.setBG;\n      }\n\n      if (codeOrString.setBold !== undefined) {\n        nextState.setBold = codeOrString.setBold;\n      }\n\n      if (codeOrString.setFaint !== undefined) {\n        nextState.setFaint = codeOrString.setFaint;\n      }\n\n      if (codeOrString.setItalic !== undefined) {\n        nextState.setItalic = codeOrString.setItalic;\n      }\n\n      if (codeOrString.setUnderline !== undefined) {\n        nextState.setUnderline = codeOrString.setUnderline;\n      }\n\n      if (codeOrString.setStrikeThrough !== undefined) {\n        nextState.setStrikeThrough = codeOrString.setStrikeThrough;\n      }\n\n      currentState = nextState;\n    }\n  }\n\n  return result;\n}\n","import linkifyHtml from \"linkify-html\";\nimport { memo } from \"react\";\n\nimport { linkifyJsOptions } from \"../../../common/utils/linkify-js.ts\";\nimport { makeReactChildren, tokenizeANSIString } from \"./Ansi.tsx\";\n\nexport interface ConsoleLineProps {\n  lineNumber: string;\n  content: string;\n  stepId: string;\n  startByte: number;\n}\n\n// Console output line\nexport const ConsoleLine = memo(function ConsoleLine(props: ConsoleLineProps) {\n  const baseURL = `?start-byte=${props.startByte}&selected-node=${props.stepId}`;\n  const id = `log-${props.stepId}-${props.lineNumber}`;\n  return (\n    <pre\n      style={{ background: \"none\", border: \"none\" }}\n      className=\"console-output-line\"\n    >\n      <div className=\"console-output-line\">\n        <a\n          className=\"console-line-number\"\n          id={id}\n          href={`${baseURL}#${id}`}\n          onClick={() => {\n            // Avoid an actual page navigation by swapping the current URL for\n            // the baseURL (query without hash) before the default \"click\"\n            // behavior (the browsers page navigation logic) runs. The\n            // effective navigation is a swap of the hash, which merely updates\n            // the style and scroll position. The page state (opened/collapsed\n            // steps and fetched logs) is retained.\n            history.replaceState({}, \"\", baseURL);\n          }}\n          style={{\n            width: Math.max(9 * String(props.lineNumber).length, 30) + \"px\",\n          }}\n        >\n          {props.lineNumber}\n        </a>\n        <div className=\"console-text\">\n          {makeReactChildren(\n            tokenizeANSIString(linkifyHtml(props.content, linkifyJsOptions)),\n            id,\n          )}\n        </div>\n      </div>\n    </pre>\n  );\n});\n","import { useEffect, useRef, useState } from \"react\";\n\nimport { ConsoleLine } from \"./ConsoleLine.tsx\";\nimport {\n  POLL_INTERVAL,\n  Result,\n  StepInfo,\n  StepLogBufferInfo,\n  TAIL_CONSOLE_LOG,\n} from \"./PipelineConsoleModel.tsx\";\n\nfunction canStickToBottom() {\n  // Avoid scrolling to the bottom when a log line is focussed.\n  return !window.location.hash.startsWith(\"#log-\");\n}\n\nexport default function ConsoleLogStream({\n  step,\n  logBuffer,\n  onMoreConsoleClick,\n  fetchExceptionText,\n}: ConsoleLogStreamProps) {\n  const appendInterval = useRef<number | null>(null);\n  const [stickToBottom, setStickToBottom] = useState(false);\n\n  useEffect(() => {\n    return () => {\n      if (appendInterval.current) {\n        clearInterval(appendInterval.current);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (step.state === Result.failure) {\n      fetchExceptionText(step.id);\n    }\n  }, [step.id, step.state, fetchExceptionText]);\n\n  useEffect(() => {\n    if (stickToBottom && logBuffer.lines.length > 0 && canStickToBottom()) {\n      // Scroll to bottom of the log stream\n      if (logBuffer.lines) {\n        requestAnimationFrame(() => {\n          if (!canStickToBottom()) return;\n          const scrollTarget = document.documentElement.scrollHeight;\n          window.scrollTo({ top: scrollTarget });\n        });\n      }\n    }\n  }, [stickToBottom, logBuffer.lines]);\n\n  useEffect(() => {\n    if (!canStickToBottom()) return;\n    const handleScroll = () => {\n      if (!canStickToBottom()) {\n        window.removeEventListener(\"scroll\", handleScroll);\n        setStickToBottom(false);\n        return;\n      }\n      const scrollPosition = window.scrollY + window.innerHeight;\n      const pageHeight = document.body.scrollHeight;\n      const isAtBottom = pageHeight - scrollPosition < 300;\n\n      setStickToBottom(isAtBottom);\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n\n  useEffect(() => {\n    const shouldRequestMoreLogs =\n      step.state === Result.running || logBuffer.endByte < 0;\n\n    if (stickToBottom && shouldRequestMoreLogs) {\n      if (!appendInterval.current) {\n        appendInterval.current = window.setInterval(() => {\n          onMoreConsoleClick(step.id, TAIL_CONSOLE_LOG);\n        }, POLL_INTERVAL);\n      }\n    } else if (appendInterval.current) {\n      clearInterval(appendInterval.current);\n      appendInterval.current = null;\n    }\n  }, [stickToBottom, step, logBuffer, onMoreConsoleClick]);\n\n  const [scrollToLogLine, setScrollToLogLine] = useState<boolean>(\n    window.location.hash.startsWith(\"#log-\"),\n  );\n  useEffect(() => {\n    if (!scrollToLogLine) return;\n    let hash = window.location.hash;\n    if (!hash.startsWith(\"#log-\")) return;\n    let [stepIdPart, lineNumberPart] = hash.slice(5).split(\"-\");\n    if (lineNumberPart && stepIdPart !== step.id) {\n      // The log line belongs to another step.\n      setScrollToLogLine(false);\n      return;\n    }\n    if (!lineNumberPart) {\n      // Backwards compatibility for links without a stepId in the hash.\n      lineNumberPart = stepIdPart;\n      stepIdPart = step.id;\n      hash = `#log-${stepIdPart}-${lineNumberPart}`;\n      location.hash = hash;\n    }\n    const element = document.getElementById(hash.slice(1));\n    if (!element) return; // Try again the next time the log lines change.\n    element.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n\n    // Toggle hash to refresh the :target css matcher of the active line.\n    location.hash = \"\";\n    location.hash = hash;\n\n    setScrollToLogLine(false);\n  }, [scrollToLogLine, step.id, logBuffer.lines]);\n\n  return (\n    <div role=\"log\">\n      {logBuffer.lines.map((content, index) => (\n        <ConsoleLine\n          key={index}\n          lineNumber={String(index)}\n          content={content}\n          stepId={step.id}\n          startByte={logBuffer.startByte}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport interface ConsoleLogStreamProps {\n  logBuffer: StepLogBufferInfo;\n  onMoreConsoleClick: (nodeId: string, startByte: number) => void;\n  fetchExceptionText: (nodeId: string) => void;\n  step: StepInfo;\n}\n"],"names":["HTML5NamedCharRefs","HEXCHARCODE","CHARCODE","NAMED","EntityParser","named","entity","matches","WSP","ALPHA","CRLF","isSpace","char","isAlpha","preprocessInput","input","EventedTokenizer","delegate","entityParser","mode","tag","maybeDoctype","nextSixChars","isPublic","isSystem","state","handler","endIndex","chars","count","Tokenizer","options","token","i","doctype","isQuoted","message","tokenize","tokenizer","LinkifyResult","StartTag","EndTag","Chars","Comment","Doctype","linkifyHtml","str","opts","tokens","linkifiedTokens","linkified","Options","defaultRender","tagName","preskipLen","skipTagTokens","linkifedChars","linkifyChars","link","attributeArrayToStrings","escapeText","tokenize$1","result","skippedTokens","stackCount","attributes","content","attributesToString","text","escapeAttr","attr","val","attrs","attrStrs","name","value","parseEscapeCode","escapeCode","graphicsPattern","match","params","num","tokenizeANSIString","len","loopCounter","escapeCodeIndex","parsedPointer","commentStartIndex","commentEndIndex","code","parsedEscapeCode","makeReactChildren","tokenizedInput","key","currentState","codeOrString","jsx","classNames","nextState","ConsoleLine","memo","props","baseURL","id","jsxs","linkifyJsOptions","canStickToBottom","ConsoleLogStream","step","logBuffer","onMoreConsoleClick","fetchExceptionText","appendInterval","useRef","stickToBottom","setStickToBottom","useState","useEffect","Result","scrollTarget","handleScroll","scrollPosition","isAtBottom","shouldRequestMoreLogs","TAIL_CONSOLE_LOG","POLL_INTERVAL","scrollToLogLine","setScrollToLogLine","hash","stepIdPart","lineNumberPart","element","index"],"mappings":"uMAMA,IAAIA,EAAqB,CAKvB,IAAK,IACL,GAAI,IACJ,GAAI,IACJ,KAAM,IACN,KAAM,GACR,EACIC,EAAc,wBACdC,EAAW,cACXC,EAAQ,mBACRC,EAA4B,UAAY,CAC1C,SAASA,EAAaC,EAAO,CAC3B,KAAK,MAAQA,CACf,CACA,OAAAD,EAAa,UAAU,MAAQ,SAAUE,EAAQ,CAC/C,GAAKA,EAGL,KAAIC,EAAUD,EAAO,MAAML,CAAW,EACtC,GAAIM,EACF,OAAO,OAAO,aAAa,SAASA,EAAQ,CAAC,EAAG,EAAE,CAAC,EAGrD,GADAA,EAAUD,EAAO,MAAMJ,CAAQ,EAC3BK,EACF,OAAO,OAAO,aAAa,SAASA,EAAQ,CAAC,EAAG,EAAE,CAAC,EAGrD,GADAA,EAAUD,EAAO,MAAMH,CAAK,EACxBI,EACF,OAAO,KAAK,MAAMA,EAAQ,CAAC,CAAC,GAAK,IAAMA,EAAQ,CAAC,EAAI,IAExD,EACOH,CACT,EAAC,EACGI,EAAM,YACNC,EAAQ,WACRC,EAAO,SACX,SAASC,EAAQC,EAAM,CACrB,OAAOJ,EAAI,KAAKI,CAAI,CACtB,CACA,SAASC,EAAQD,EAAM,CACrB,OAAOH,EAAM,KAAKG,CAAI,CACxB,CACA,SAASE,EAAgBC,EAAO,CAC9B,OAAOA,EAAM,QAAQL,EAAM;AAAA,CAAI,CACjC,CACA,IAAIM,EAAgC,UAAY,CAC9C,SAASA,EAAiBC,EAAUC,EAAcC,EAAM,CAClDA,IAAS,SACXA,EAAO,cAET,KAAK,SAAWF,EAChB,KAAK,aAAeC,EACpB,KAAK,KAAOC,EACZ,KAAK,MAAQ,aACb,KAAK,KAAO,GACZ,KAAK,OAAS,GACd,KAAK,MAAQ,GACb,KAAK,MAAQ,GACb,KAAK,cAAgB,GACrB,KAAK,OAAS,CACZ,WAAY,UAAY,CACtB,IAAIP,EAAO,KAAK,KAAI,EACpB,GAAIA,IAAS,KAAO,CAAC,KAAK,gBAAe,EACvC,KAAK,aAAa,SAAS,EAC3B,KAAK,aAAY,EACjB,KAAK,QAAO,MACP,CACL,GAAI,KAAK,OAAS,cAAgBA,IAAS;AAAA,EAAM,CAC/C,IAAIQ,EAAM,KAAK,cAAc,YAAW,GACpCA,IAAQ,OAASA,IAAQ,aAC3B,KAAK,QAAO,CAEhB,CACA,KAAK,aAAa,MAAM,EACxB,KAAK,SAAS,UAAS,CACzB,CACF,EACA,KAAM,UAAY,CAChB,IAAIR,EAAO,KAAK,KAAI,EAChBQ,EAAM,KAAK,cACXR,IAAS,KAAO,CAAC,KAAK,gBAAe,GACvC,KAAK,SAAS,WAAU,EACxB,KAAK,aAAa,SAAS,EAC3B,KAAK,aAAY,EACjB,KAAK,QAAO,GACHA,IAAS,KAAOQ,IAAQ,UAAYA,IAAQ,SACrD,KAAK,QAAO,EACZ,KAAK,SAAS,aAAa,KAAK,eAAc,GAAM,GAAG,IAEvD,KAAK,QAAO,EACZ,KAAK,SAAS,aAAaR,CAAI,EAEnC,EACA,QAAS,UAAY,CACnB,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,IACX,KAAK,aAAa,uBAAuB,EAChCA,IAAS,IAClB,KAAK,aAAa,YAAY,GACrBA,IAAS,KAAOA,IAAS,KAAOC,EAAQD,CAAI,KACrD,KAAK,aAAa,SAAS,EAC3B,KAAK,cAAgB,GACrB,KAAK,SAAS,cAAa,EAC3B,KAAK,gBAAgBA,CAAI,EAE7B,EACA,sBAAuB,UAAY,CACjC,IAAIA,EAAO,KAAK,QAAO,EACvB,GAAIA,IAAS,KAAO,KAAK,KAAI,IAAO,IAClC,KAAK,QAAO,EACZ,KAAK,aAAa,cAAc,EAChC,KAAK,SAAS,aAAY,MACrB,CACL,IAAIS,EAAeT,EAAK,YAAW,EAAK,KAAK,MAAM,UAAU,KAAK,MAAO,KAAK,MAAQ,CAAC,EAAE,YAAW,EAChGS,IAAiB,YACnB,KAAK,QAAO,EACZ,KAAK,QAAO,EACZ,KAAK,QAAO,EACZ,KAAK,QAAO,EACZ,KAAK,QAAO,EACZ,KAAK,QAAO,EACZ,KAAK,aAAa,SAAS,EACvB,KAAK,SAAS,cAAc,KAAK,SAAS,aAAY,EAE9D,CACF,EACA,QAAS,UAAY,CACnB,IAAIT,EAAO,KAAK,QAAO,EACnBD,EAAQC,CAAI,GACd,KAAK,aAAa,mBAAmB,CAEzC,EACA,kBAAmB,UAAY,CAC7B,IAAIA,EAAO,KAAK,QAAO,EACnBD,EAAQC,CAAI,IAGd,KAAK,aAAa,aAAa,EAC3B,KAAK,SAAS,qBAAqB,KAAK,SAAS,oBAAoBA,EAAK,aAAa,EAE/F,EACA,YAAa,UAAY,CACvB,IAAIA,EAAO,KAAK,QAAO,EACnBD,EAAQC,CAAI,EACd,KAAK,aAAa,kBAAkB,EAC3BA,IAAS,KACd,KAAK,SAAS,YAAY,KAAK,SAAS,WAAU,EACtD,KAAK,aAAa,YAAY,GAE1B,KAAK,SAAS,qBAAqB,KAAK,SAAS,oBAAoBA,EAAK,aAAa,CAE/F,EACA,iBAAkB,UAAY,CAC5B,IAAIA,EAAO,KAAK,QAAO,EACvB,GAAI,CAAAD,EAAQC,CAAI,EAET,GAAIA,IAAS,IACd,KAAK,SAAS,YAAY,KAAK,SAAS,WAAU,EACtD,KAAK,aAAa,YAAY,MACzB,CACL,IAAIU,EAAeV,EAAK,YAAW,EAAK,KAAK,MAAM,UAAU,KAAK,MAAO,KAAK,MAAQ,CAAC,EAAE,YAAW,EAChGW,EAAWD,EAAa,YAAW,IAAO,SAC1CE,EAAWF,EAAa,YAAW,IAAO,UAC1CC,GAAYC,KACd,KAAK,QAAO,EACZ,KAAK,QAAO,EACZ,KAAK,QAAO,EACZ,KAAK,QAAO,EACZ,KAAK,QAAO,EACZ,KAAK,QAAO,GAEVD,EACF,KAAK,aAAa,2BAA2B,EACpCC,GACT,KAAK,aAAa,2BAA2B,CAEjD,CACF,EACA,0BAA2B,UAAY,CACrC,IAAIZ,EAAO,KAAK,KAAI,EAChBD,EAAQC,CAAI,GACd,KAAK,aAAa,+BAA+B,EACjD,KAAK,QAAO,GACHA,IAAS,KAClB,KAAK,aAAa,qCAAqC,EACvD,KAAK,QAAO,GACHA,IAAS,KAClB,KAAK,aAAa,qCAAqC,EACvD,KAAK,QAAO,GACHA,IAAS,MAClB,KAAK,QAAO,EACR,KAAK,SAAS,YAAY,KAAK,SAAS,WAAU,EACtD,KAAK,aAAa,YAAY,EAElC,EACA,oCAAqC,UAAY,CAC/C,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,IACX,KAAK,aAAa,8BAA8B,EACvCA,IAAS,KACd,KAAK,SAAS,YAAY,KAAK,SAAS,WAAU,EACtD,KAAK,aAAa,YAAY,GAE1B,KAAK,SAAS,iCAAiC,KAAK,SAAS,gCAAgCA,CAAI,CAEzG,EACA,oCAAqC,UAAY,CAC/C,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,IACX,KAAK,aAAa,8BAA8B,EACvCA,IAAS,KACd,KAAK,SAAS,YAAY,KAAK,SAAS,WAAU,EACtD,KAAK,aAAa,YAAY,GAE1B,KAAK,SAAS,iCAAiC,KAAK,SAAS,gCAAgCA,CAAI,CAEzG,EACA,6BAA8B,UAAY,CACxC,IAAIA,EAAO,KAAK,QAAO,EACnBD,EAAQC,CAAI,EACd,KAAK,aAAa,0CAA0C,EACnDA,IAAS,KACd,KAAK,SAAS,YAAY,KAAK,SAAS,WAAU,EACtD,KAAK,aAAa,YAAY,GACrBA,IAAS,IAClB,KAAK,aAAa,qCAAqC,EAC9CA,IAAS,KAClB,KAAK,aAAa,qCAAqC,CAE3D,EACA,yCAA0C,UAAY,CACpD,IAAIA,EAAO,KAAK,QAAO,EACnBD,EAAQC,CAAI,IAELA,IAAS,KACd,KAAK,SAAS,YAAY,KAAK,SAAS,WAAU,EACtD,KAAK,aAAa,YAAY,GACrBA,IAAS,IAClB,KAAK,aAAa,qCAAqC,EAC9CA,IAAS,KAClB,KAAK,aAAa,qCAAqC,EAE3D,EACA,oCAAqC,UAAY,CAC/C,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,IACX,KAAK,aAAa,8BAA8B,EACvCA,IAAS,KACd,KAAK,SAAS,YAAY,KAAK,SAAS,WAAU,EACtD,KAAK,aAAa,YAAY,GAE1B,KAAK,SAAS,iCAAiC,KAAK,SAAS,gCAAgCA,CAAI,CAEzG,EACA,oCAAqC,UAAY,CAC/C,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,IACX,KAAK,aAAa,8BAA8B,EACvCA,IAAS,KACd,KAAK,SAAS,YAAY,KAAK,SAAS,WAAU,EACtD,KAAK,aAAa,YAAY,GAE1B,KAAK,SAAS,iCAAiC,KAAK,SAAS,gCAAgCA,CAAI,CAEzG,EACA,6BAA8B,UAAY,CACxC,IAAIA,EAAO,KAAK,QAAO,EACnBD,EAAQC,CAAI,GAELA,IAAS,MACd,KAAK,SAAS,YAAY,KAAK,SAAS,WAAU,EACtD,KAAK,aAAa,YAAY,EAElC,EACA,aAAc,UAAY,CACxB,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,KAAO,KAAK,KAAI,IAAO,IAClC,KAAK,aAAa,kBAAkB,EAC3BA,IAAS,KAClB,KAAK,SAAS,cAAa,EAC3B,KAAK,aAAa,YAAY,IAE9B,KAAK,SAAS,oBAAoBA,CAAI,EACtC,KAAK,aAAa,SAAS,EAE/B,EACA,iBAAkB,UAAY,CAC5B,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,IACX,KAAK,aAAa,YAAY,EACrBA,IAAS,KAClB,KAAK,SAAS,cAAa,EAC3B,KAAK,aAAa,YAAY,IAE9B,KAAK,SAAS,oBAAoB,GAAG,EACrC,KAAK,aAAa,SAAS,EAE/B,EACA,QAAS,UAAY,CACnB,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,IACX,KAAK,aAAa,gBAAgB,EAElC,KAAK,SAAS,oBAAoBA,CAAI,CAE1C,EACA,eAAgB,UAAY,CAC1B,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,KAAO,KAAK,KAAI,IAAO,IAClC,KAAK,SAAS,oBAAoBA,CAAI,EAC7BA,IAAS,IAClB,KAAK,aAAa,YAAY,GAE9B,KAAK,SAAS,oBAAoB,IAAMA,CAAI,EAC5C,KAAK,aAAa,SAAS,EAE/B,EACA,WAAY,UAAY,CACtB,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,KACX,KAAK,SAAS,cAAa,EAC3B,KAAK,aAAa,YAAY,IAE9B,KAAK,SAAS,oBAAoB,KAAOA,CAAI,EAC7C,KAAK,aAAa,SAAS,EAE/B,EACA,QAAS,UAAY,CACnB,IAAIA,EAAO,KAAK,QAAO,EACnBD,EAAQC,CAAI,EACd,KAAK,aAAa,qBAAqB,EAC9BA,IAAS,IAClB,KAAK,aAAa,qBAAqB,EAC9BA,IAAS,KAClB,KAAK,SAAS,UAAS,EACvB,KAAK,aAAa,YAAY,GAE9B,KAAK,gBAAgBA,CAAI,CAE7B,EACA,WAAY,UAAY,CACtB,IAAIA,EAAO,KAAK,QAAO,EACnBD,EAAQC,CAAI,GACd,KAAK,aAAa,qBAAqB,EACvC,KAAK,cAAgB,IACZA,IAAS,KAClB,KAAK,aAAa,qBAAqB,EACvC,KAAK,cAAgB,IACZA,IAAS,KAClB,KAAK,SAAS,UAAS,EACvB,KAAK,aAAa,YAAY,EAC9B,KAAK,cAAgB,IAErB,KAAK,gBAAgBA,CAAI,CAE7B,EACA,oBAAqB,UAAY,CAC/B,IAAIA,EAAO,KAAK,KAAI,EACpB,GAAID,EAAQC,CAAI,EAAG,CACjB,KAAK,QAAO,EACZ,MACF,MAAWA,IAAS,KAClB,KAAK,aAAa,qBAAqB,EACvC,KAAK,QAAO,GACHA,IAAS,KAClB,KAAK,QAAO,EACZ,KAAK,SAAS,UAAS,EACvB,KAAK,aAAa,YAAY,GACrBA,IAAS,KAClB,KAAK,SAAS,kBAAkB,8CAA8C,EAC9E,KAAK,aAAa,eAAe,EACjC,KAAK,SAAS,eAAc,EAC5B,KAAK,QAAO,EACZ,KAAK,SAAS,sBAAsBA,CAAI,IAExC,KAAK,aAAa,eAAe,EACjC,KAAK,SAAS,eAAc,EAEhC,EACA,cAAe,UAAY,CACzB,IAAIA,EAAO,KAAK,KAAI,EAChBD,EAAQC,CAAI,GACd,KAAK,aAAa,oBAAoB,EACtC,KAAK,QAAO,GACHA,IAAS,KAClB,KAAK,SAAS,oBAAoB,EAAK,EACvC,KAAK,SAAS,qBAAoB,EAClC,KAAK,QAAO,EACZ,KAAK,aAAa,qBAAqB,GAC9BA,IAAS,KAClB,KAAK,aAAa,sBAAsB,EACxC,KAAK,QAAO,GACHA,IAAS,KAClB,KAAK,SAAS,oBAAoB,EAAK,EACvC,KAAK,SAAS,qBAAoB,EAClC,KAAK,QAAO,EACZ,KAAK,SAAS,UAAS,EACvB,KAAK,aAAa,YAAY,GACrBA,IAAS,KAAOA,IAAS,KAAOA,IAAS,KAClD,KAAK,SAAS,kBAAkBA,EAAO,kDAAkD,EACzF,KAAK,QAAO,EACZ,KAAK,SAAS,sBAAsBA,CAAI,IAExC,KAAK,QAAO,EACZ,KAAK,SAAS,sBAAsBA,CAAI,EAE5C,EACA,mBAAoB,UAAY,CAC9B,IAAIA,EAAO,KAAK,KAAI,EACpB,GAAID,EAAQC,CAAI,EAAG,CACjB,KAAK,QAAO,EACZ,MACF,MAAWA,IAAS,KAClB,KAAK,SAAS,oBAAoB,EAAK,EACvC,KAAK,SAAS,qBAAoB,EAClC,KAAK,QAAO,EACZ,KAAK,aAAa,qBAAqB,GAC9BA,IAAS,KAClB,KAAK,QAAO,EACZ,KAAK,aAAa,sBAAsB,GAC/BA,IAAS,KAClB,KAAK,SAAS,oBAAoB,EAAK,EACvC,KAAK,SAAS,qBAAoB,EAClC,KAAK,QAAO,EACZ,KAAK,SAAS,UAAS,EACvB,KAAK,aAAa,YAAY,IAE9B,KAAK,SAAS,oBAAoB,EAAK,EACvC,KAAK,SAAS,qBAAoB,EAClC,KAAK,aAAa,eAAe,EACjC,KAAK,SAAS,eAAc,EAC5B,KAAK,QAAO,EACZ,KAAK,SAAS,sBAAsBA,CAAI,EAE5C,EACA,qBAAsB,UAAY,CAChC,IAAIA,EAAO,KAAK,KAAI,EAChBD,EAAQC,CAAI,EACd,KAAK,QAAO,EACHA,IAAS,KAClB,KAAK,aAAa,4BAA4B,EAC9C,KAAK,SAAS,oBAAoB,EAAI,EACtC,KAAK,QAAO,GACHA,IAAS,KAClB,KAAK,aAAa,4BAA4B,EAC9C,KAAK,SAAS,oBAAoB,EAAI,EACtC,KAAK,QAAO,GACHA,IAAS,KAClB,KAAK,SAAS,oBAAoB,EAAK,EACvC,KAAK,SAAS,qBAAoB,EAClC,KAAK,QAAO,EACZ,KAAK,SAAS,UAAS,EACvB,KAAK,aAAa,YAAY,IAE9B,KAAK,aAAa,wBAAwB,EAC1C,KAAK,SAAS,oBAAoB,EAAK,EACvC,KAAK,QAAO,EACZ,KAAK,SAAS,uBAAuBA,CAAI,EAE7C,EACA,2BAA4B,UAAY,CACtC,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,KACX,KAAK,SAAS,qBAAoB,EAClC,KAAK,aAAa,2BAA2B,GACpCA,IAAS,IAClB,KAAK,SAAS,uBAAuB,KAAK,eAAc,GAAM,GAAG,EAEjE,KAAK,SAAS,uBAAuBA,CAAI,CAE7C,EACA,2BAA4B,UAAY,CACtC,IAAIA,EAAO,KAAK,QAAO,EACnBA,IAAS,KACX,KAAK,SAAS,qBAAoB,EAClC,KAAK,aAAa,2BAA2B,GACpCA,IAAS,IAClB,KAAK,SAAS,uBAAuB,KAAK,eAAc,GAAM,GAAG,EAEjE,KAAK,SAAS,uBAAuBA,CAAI,CAE7C,EACA,uBAAwB,UAAY,CAClC,IAAIA,EAAO,KAAK,KAAI,EAChBD,EAAQC,CAAI,GACd,KAAK,SAAS,qBAAoB,EAClC,KAAK,QAAO,EACZ,KAAK,aAAa,qBAAqB,GAC9BA,IAAS,KAClB,KAAK,SAAS,qBAAoB,EAClC,KAAK,QAAO,EACZ,KAAK,aAAa,qBAAqB,GAC9BA,IAAS,KAClB,KAAK,QAAO,EACZ,KAAK,SAAS,uBAAuB,KAAK,eAAc,GAAM,GAAG,GACxDA,IAAS,KAClB,KAAK,SAAS,qBAAoB,EAClC,KAAK,QAAO,EACZ,KAAK,SAAS,UAAS,EACvB,KAAK,aAAa,YAAY,IAE9B,KAAK,QAAO,EACZ,KAAK,SAAS,uBAAuBA,CAAI,EAE7C,EACA,0BAA2B,UAAY,CACrC,IAAIA,EAAO,KAAK,KAAI,EAChBD,EAAQC,CAAI,GACd,KAAK,QAAO,EACZ,KAAK,aAAa,qBAAqB,GAC9BA,IAAS,KAClB,KAAK,QAAO,EACZ,KAAK,aAAa,qBAAqB,GAC9BA,IAAS,KAClB,KAAK,QAAO,EACZ,KAAK,SAAS,UAAS,EACvB,KAAK,aAAa,YAAY,GAE9B,KAAK,aAAa,qBAAqB,CAE3C,EACA,oBAAqB,UAAY,CAC/B,IAAIA,EAAO,KAAK,KAAI,EAChBA,IAAS,KACX,KAAK,QAAO,EACZ,KAAK,SAAS,qBAAoB,EAClC,KAAK,SAAS,UAAS,EACvB,KAAK,aAAa,YAAY,GAE9B,KAAK,aAAa,qBAAqB,CAE3C,EACA,WAAY,UAAY,CACtB,IAAIA,EAAO,KAAK,QAAO,GACnBA,IAAS,KAAOA,IAAS,KAAOC,EAAQD,CAAI,KAC9C,KAAK,aAAa,YAAY,EAC9B,KAAK,cAAgB,GACrB,KAAK,SAAS,YAAW,EACzB,KAAK,gBAAgBA,CAAI,EAE7B,CACN,EACI,KAAK,MAAK,CACZ,CACA,OAAAI,EAAiB,UAAU,MAAQ,UAAY,CAC7C,KAAK,aAAa,YAAY,EAC9B,KAAK,MAAQ,GACb,KAAK,cAAgB,GACrB,KAAK,MAAQ,EACb,KAAK,KAAO,EACZ,KAAK,OAAS,EACd,KAAK,SAAS,MAAK,CACrB,EACAA,EAAiB,UAAU,aAAe,SAAUS,EAAO,CACzD,KAAK,MAAQA,CACf,EACAT,EAAiB,UAAU,SAAW,SAAUD,EAAO,CACrD,KAAK,MAAK,EACV,KAAK,aAAaA,CAAK,EACvB,KAAK,YAAW,CAClB,EACAC,EAAiB,UAAU,aAAe,SAAUD,EAAO,CAEzD,IADA,KAAK,OAASD,EAAgBC,CAAK,EAC5B,KAAK,MAAQ,KAAK,MAAM,QAAQ,CACrC,IAAIW,EAAU,KAAK,OAAO,KAAK,KAAK,EACpC,GAAIA,IAAY,OACdA,EAAQ,KAAK,IAAI,MAEjB,OAAM,IAAI,MAAM,mBAAqB,KAAK,KAAK,CAEnD,CACF,EACAV,EAAiB,UAAU,YAAc,UAAY,CACnD,KAAK,UAAS,CAChB,EACAA,EAAiB,UAAU,UAAY,UAAY,CAC7C,KAAK,QAAU,SACjB,KAAK,SAAS,WAAU,EACxB,KAAK,aAAa,YAAY,EAElC,EACAA,EAAiB,UAAU,KAAO,UAAY,CAC5C,OAAO,KAAK,MAAM,OAAO,KAAK,KAAK,CACrC,EACAA,EAAiB,UAAU,QAAU,UAAY,CAC/C,IAAIJ,EAAO,KAAK,KAAI,EACpB,YAAK,QACDA,IAAS;AAAA,GACX,KAAK,OACL,KAAK,OAAS,GAEd,KAAK,SAEAA,CACT,EACAI,EAAiB,UAAU,eAAiB,UAAY,CACtD,IAAIW,EAAW,KAAK,MAAM,QAAQ,IAAK,KAAK,KAAK,EACjD,GAAIA,IAAa,GAGjB,KAAIrB,EAAS,KAAK,MAAM,MAAM,KAAK,MAAOqB,CAAQ,EAC9CC,EAAQ,KAAK,aAAa,MAAMtB,CAAM,EAC1C,GAAIsB,EAAO,CAGT,QAFIC,EAAQvB,EAAO,OAEZuB,GACL,KAAK,QAAO,EACZA,IAGF,YAAK,QAAO,EACLD,CACT,EACF,EACAZ,EAAiB,UAAU,aAAe,UAAY,CACpD,KAAK,SAAS,QAAO,CACvB,EACAA,EAAiB,UAAU,gBAAkB,SAAUJ,EAAM,CAC3D,KAAK,eAAiBA,EACtB,KAAK,SAAS,gBAAgBA,CAAI,CACpC,EACAI,EAAiB,UAAU,gBAAkB,UAAY,CACvD,IAAII,EAAM,KAAK,cACf,OAAOA,IAAQ,SAAW,KAAK,MAAM,UAAU,KAAK,MAAO,KAAK,MAAQ,CAAC,IAAM,YAAcA,IAAQ,SAAW,KAAK,MAAM,UAAU,KAAK,MAAO,KAAK,MAAQ,CAAC,IAAM,YAAcA,IAAQ,UAAY,KAAK,MAAM,UAAU,KAAK,MAAO,KAAK,MAAQ,CAAC,IAAM,YAC9P,EACOJ,CACT,EAAC,EACGc,EAAyB,UAAY,CACvC,SAASA,EAAUZ,EAAca,EAAS,CACpCA,IAAY,SACdA,EAAU,CAAA,GAEZ,KAAK,QAAUA,EACf,KAAK,MAAQ,KACb,KAAK,UAAY,EACjB,KAAK,YAAc,EACnB,KAAK,OAAS,CAAA,EACd,KAAK,UAAY,IAAIf,EAAiB,KAAME,EAAca,EAAQ,IAAI,EACtE,KAAK,kBAAoB,MAC3B,CACA,OAAAD,EAAU,UAAU,SAAW,SAAUf,EAAO,CAC9C,YAAK,OAAS,CAAA,EACd,KAAK,UAAU,SAASA,CAAK,EACtB,KAAK,MACd,EACAe,EAAU,UAAU,aAAe,SAAUf,EAAO,CAClD,YAAK,OAAS,CAAA,EACd,KAAK,UAAU,aAAaA,CAAK,EAC1B,KAAK,MACd,EACAe,EAAU,UAAU,YAAc,UAAY,CAC5C,YAAK,OAAS,CAAA,EACd,KAAK,UAAU,YAAW,EACnB,KAAK,OAAO,CAAC,CACtB,EACAA,EAAU,UAAU,MAAQ,UAAY,CACtC,KAAK,MAAQ,KACb,KAAK,UAAY,EACjB,KAAK,YAAc,CACrB,EACAA,EAAU,UAAU,QAAU,UAAY,CACxC,IAAIE,EAAQ,KAAK,MACjB,GAAIA,IAAU,KACZ,MAAM,IAAI,MAAM,6BAA6B,EAE/C,GAAI,UAAU,SAAW,EACvB,OAAOA,EAET,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IACpC,GAAID,EAAM,OAAS,UAAUC,CAAC,EAC5B,OAAOD,EAGX,MAAM,IAAI,MAAM,+BAAiCA,EAAM,IAAI,CAC7D,EACAF,EAAU,UAAU,KAAO,SAAUE,EAAO,CAC1C,KAAK,MAAQA,EACb,KAAK,OAAO,KAAKA,CAAK,CACxB,EACAF,EAAU,UAAU,iBAAmB,UAAY,CACjD,OAAO,KAAK,iBACd,EACAA,EAAU,UAAU,WAAa,UAAY,CACvC,KAAK,QAAQ,MACf,KAAK,QAAO,EAAG,IAAM,CACnB,MAAO,CACL,KAAM,KAAK,UACX,OAAQ,KAAK,WACvB,EACQ,IAAK,CACH,KAAM,KAAK,UAAU,KACrB,OAAQ,KAAK,UAAU,MACjC,CACA,GAEI,KAAK,UAAY,KAAK,UAAU,KAChC,KAAK,YAAc,KAAK,UAAU,MACpC,EAEAA,EAAU,UAAU,aAAe,UAAY,CAC7C,KAAK,KAAK,CACR,KAAM,UACN,KAAM,EACZ,CAAK,CACH,EACAA,EAAU,UAAU,oBAAsB,SAAUlB,EAAM,CACxD,KAAK,QAAQ,SAAS,EAAgB,MAAQA,CAChD,EACAkB,EAAU,UAAU,gCAAkC,SAAUlB,EAAM,CACpE,IAAIsB,EAAU,KAAK,QAAQ,SAAS,EAChCA,EAAQ,mBAAqB,OAC/BA,EAAQ,iBAAmBtB,EAE3BsB,EAAQ,kBAAoBtB,CAEhC,EACAkB,EAAU,UAAU,gCAAkC,SAAUlB,EAAM,CACpE,IAAIsB,EAAU,KAAK,QAAQ,SAAS,EAChCA,EAAQ,mBAAqB,OAC/BA,EAAQ,iBAAmBtB,EAE3BsB,EAAQ,kBAAoBtB,CAEhC,EACAkB,EAAU,UAAU,WAAa,UAAY,CAC3C,KAAK,WAAU,CACjB,EACAA,EAAU,UAAU,UAAY,UAAY,CAC1C,KAAK,KAAK,CACR,KAAM,QACN,MAAO,EACb,CAAK,CACH,EACAA,EAAU,UAAU,aAAe,SAAUlB,EAAM,CACjD,KAAK,QAAQ,OAAO,EAAc,OAASA,CAC7C,EACAkB,EAAU,UAAU,WAAa,UAAY,CAC3C,KAAK,WAAU,CACjB,EAEAA,EAAU,UAAU,aAAe,UAAY,CAC7C,KAAK,KAAK,CACR,KAAM,UACN,MAAO,EACb,CAAK,CACH,EACAA,EAAU,UAAU,oBAAsB,SAAUlB,EAAM,CACxD,KAAK,QAAQ,SAAS,EAAgB,OAASA,CACjD,EACAkB,EAAU,UAAU,cAAgB,UAAY,CAC9C,KAAK,WAAU,CACjB,EAEAA,EAAU,UAAU,QAAU,UAAY,CAAC,EAC3CA,EAAU,UAAU,cAAgB,UAAY,CAC9C,KAAK,KAAK,CACR,KAAM,WACN,QAAS,GACT,WAAY,CAAA,EACZ,YAAa,EACnB,CAAK,CACH,EACAA,EAAU,UAAU,YAAc,UAAY,CAC5C,KAAK,KAAK,CACR,KAAM,SACN,QAAS,EACf,CAAK,CACH,EACAA,EAAU,UAAU,UAAY,UAAY,CAC1C,KAAK,WAAU,CACjB,EACAA,EAAU,UAAU,qBAAuB,UAAY,CACrD,KAAK,QAAQ,UAAU,EAAiB,YAAc,EACxD,EAEAA,EAAU,UAAU,gBAAkB,SAAUlB,EAAM,CACpD,KAAK,QAAQ,WAA2B,QAAQ,EAAe,SAAWA,CAC5E,EAEAkB,EAAU,UAAU,eAAiB,UAAY,CAC/C,KAAK,kBAAoB,CAAC,GAAI,GAAI,EAAK,CACzC,EACAA,EAAU,UAAU,sBAAwB,SAAUlB,EAAM,CAC1D,KAAK,iBAAgB,EAAG,CAAC,GAAKA,CAChC,EACAkB,EAAU,UAAU,oBAAsB,SAAUK,EAAU,CAC5D,KAAK,iBAAgB,EAAG,CAAC,EAAIA,CAC/B,EACAL,EAAU,UAAU,uBAAyB,SAAUlB,EAAM,CAC3D,KAAK,iBAAgB,EAAG,CAAC,GAAKA,CAChC,EACAkB,EAAU,UAAU,qBAAuB,UAAY,CACrD,KAAK,QAAQ,UAAU,EAAiB,WAAW,KAAK,KAAK,iBAAiB,CAChF,EACAA,EAAU,UAAU,kBAAoB,SAAUM,EAAS,CACzD,KAAK,UAAU,YAAcA,CAC/B,EACON,CACT,EAAC,EACD,SAASO,EAAStB,EAAOgB,EAAS,CAChC,IAAIO,EAAY,IAAIR,EAAU,IAAI1B,EAAaJ,CAAkB,EAAG+B,CAAO,EAC3E,OAAOO,EAAU,SAASvB,CAAK,CACjC,CAEA,MAAMwB,EAAgB,gBAChBC,EAAW,WACXC,EAAS,SACTC,EAAQ,QACRC,EAAU,UACVC,EAAU,UAOhB,SAASC,EAAYC,EAAKC,EAAO,GAAI,CAGnC,MAAMC,EAASX,EAASS,CAAG,EACrBG,EAAkB,CAAA,EAClBC,EAAY,CAAA,EACZnB,EAAU,IAAIoB,EAAQJ,EAAMK,CAAa,EAG/C,QAASnB,EAAI,EAAGA,EAAIe,EAAO,OAAQf,IAAK,CACtC,MAAMD,EAAQgB,EAAOf,CAAC,EACtB,GAAID,EAAM,OAASQ,EAAU,CAC3BS,EAAgB,KAAKjB,CAAK,EAG1B,MAAMqB,EAAUrB,EAAM,QAAQ,YAAW,EAEzC,GAAI,EADcqB,IAAY,KAAOtB,EAAQ,WAAW,QAAQsB,CAAO,GAAK,GAE1E,SAEF,IAAIC,EAAaL,EAAgB,OACjCM,EAAcF,EAASL,EAAQ,EAAEf,EAAGgB,CAAe,EACnDhB,GAAKgB,EAAgB,OAASK,EAAa,CAC7C,SAAWtB,EAAM,OAASU,EAExBO,EAAgB,KAAKjB,CAAK,MACrB,CAEL,MAAMwB,EAAgBC,EAAazB,EAAM,MAAOD,CAAO,EACvDkB,EAAgB,KAAK,MAAMA,EAAiBO,CAAa,CAC3D,CACF,CAGA,QAASvB,EAAI,EAAGA,EAAIgB,EAAgB,OAAQhB,IAAK,CAC/C,MAAMD,EAAQiB,EAAgBhB,CAAC,EAC/B,OAAQD,EAAM,KAAI,CAChB,KAAKO,EACHW,EAAU,KAAKlB,EAAM,QAAQ,EAC7B,MACF,KAAKQ,EACH,CACE,IAAIkB,EAAO,IAAM1B,EAAM,QACnBA,EAAM,WAAW,OAAS,IAC5B0B,GAAQ,IAAMC,EAAwB3B,EAAM,UAAU,EAAE,KAAK,GAAG,GAE9DA,EAAM,cACR0B,GAAQ,MAEVA,GAAQ,IACRR,EAAU,KAAKQ,CAAI,EACnB,KACF,CACF,KAAKjB,EACHS,EAAU,KAAK,KAAKlB,EAAM,OAAO,GAAG,EACpC,MACF,KAAKU,EACHQ,EAAU,KAAKU,EAAW5B,EAAM,KAAK,CAAC,EACtC,MACF,KAAKW,EACHO,EAAU,KAAK,OAAOU,EAAW5B,EAAM,KAAK,CAAC,KAAK,EAClD,MACF,KAAKY,EACH,CACE,IAAIV,EAAU,aAAaF,EAAM,IAAI,GACjCA,EAAM,mBACRE,GAAW,YAAYF,EAAM,gBAAgB,KAE3CA,EAAM,mBACRE,GAAW,KAAKF,EAAM,gBAAgB,KAExCE,GAAW,IACXgB,EAAU,KAAKhB,CAAO,EACtB,KACF,CACR,CACE,CACA,OAAOgB,EAAU,KAAK,EAAE,CAC1B,CAQA,SAASO,EAAaX,EAAKf,EAAS,CAClC,MAAMiB,EAASa,EAAWf,CAAG,EACvBgB,EAAS,CAAA,EACf,QAAS7B,EAAI,EAAGA,EAAIe,EAAO,OAAQf,IAAK,CACtC,MAAMD,EAAQgB,EAAOf,CAAC,EAClBD,EAAM,IAAM,MAAQD,EAAQ,IAAI,OAAO,EACzC+B,EAAO,KAAK,CACV,KAAMtB,EACN,QAAS,KACT,WAAY,CAAA,EACZ,YAAa,EACrB,CAAO,EACQ,CAACR,EAAM,QAAU,CAACD,EAAQ,MAAMC,CAAK,EAC9C8B,EAAO,KAAK,CACV,KAAMpB,EACN,MAAOV,EAAM,SAAQ,CAC7B,CAAO,EAED8B,EAAO,KAAK,CACV,KAAMvB,EACN,SAAUR,EAAQ,OAAOC,CAAK,CACtC,CAAO,CAEL,CACA,OAAO8B,CACT,CAgBA,SAASP,EAAcF,EAASL,EAAQf,EAAG8B,EAAe,CAExD,IAAIC,EAAa,EACjB,KAAO/B,EAAIe,EAAO,QAAUgB,EAAa,GAAG,CAC1C,IAAIhC,EAAQgB,EAAOf,CAAC,EAChBD,EAAM,OAASQ,GAAYR,EAAM,QAAQ,YAAW,IAAOqB,EAE7DW,IACShC,EAAM,OAASS,GAAUT,EAAM,QAAQ,YAAW,IAAOqB,GAElEW,IAEFD,EAAc,KAAK/B,CAAK,EACxBC,GACF,CAGA,OAAO8B,CACT,CACA,SAASX,EAAc,CACrB,QAAAC,EACA,WAAAY,EACA,QAAAC,CACF,EAAG,CACD,MAAO,IAAIb,CAAO,IAAIc,EAAmBF,CAAU,CAAC,IAAIL,EAAWM,CAAO,CAAC,KAAKb,CAAO,GACzF,CACA,SAASO,EAAWQ,EAAM,CACxB,OAAOA,EAAK,QAAQ,KAAM,MAAM,EAAE,QAAQ,KAAM,MAAM,CACxD,CACA,SAASC,EAAWC,EAAM,CACxB,OAAOA,EAAK,QAAQ,KAAM,QAAQ,CACpC,CACA,SAASH,EAAmBF,EAAY,CACtC,MAAMH,EAAS,CAAA,EACf,UAAWQ,KAAQL,EAAY,CAC7B,MAAMM,EAAMN,EAAWK,CAAI,EAAI,GAC/BR,EAAO,KAAK,GAAGQ,CAAI,KAAKD,EAAWE,CAAG,CAAC,GAAG,CAC5C,CACA,OAAOT,EAAO,KAAK,GAAG,CACxB,CACA,SAASH,EAAwBa,EAAO,CACtC,MAAMC,EAAW,CAAA,EACjB,QAASxC,EAAI,EAAGA,EAAIuC,EAAM,OAAQvC,IAAK,CACrC,MAAMyC,EAAOF,EAAMvC,CAAC,EAAE,CAAC,EACjB0C,EAAQH,EAAMvC,CAAC,EAAE,CAAC,EAAI,GAC5BwC,EAAS,KAAK,GAAGC,CAAI,KAAKL,EAAWM,CAAK,CAAC,GAAG,CAChD,CACA,OAAOF,CACT,CCh8BO,SAASG,EAAgBC,EAA4B,CAE1D,MAAMC,EAAkB,uBAElBhB,EAAiB,CACrB,yBAA0B,GAC1B,WAAAe,CAAA,EAGIE,EAAQD,EAAgB,KAAKD,CAAU,EAE7C,GAAIE,EAAO,CACTjB,EAAO,yBAA2B,GAClCA,EAAO,MAAQ,GACfA,EAAO,MAAQ,GACfA,EAAO,QAAU,GACjBA,EAAO,QAAU,GAGjB,MAAMkB,GAAUD,EAAM,CAAC,GAAK,IACzB,MAAM,GAAG,EACT,IAAKjC,GAAQ,SAASA,GAAO,GAAG,CAAC,EAGpC,UAAWmC,KAAOD,EACZC,GAAO,IAAMA,GAAO,GACtBnB,EAAO,MAAQmB,EAAM,GACZA,GAAO,IAAMA,GAAO,GAC7BnB,EAAO,MAAQmB,EAAM,GACZA,GAAO,IAAMA,GAAO,GAC7BnB,EAAO,MAAQmB,EAAM,GAAK,EACjBA,GAAO,KAAOA,GAAO,IAC9BnB,EAAO,MAAQmB,EAAM,IAAM,EAClBA,IAAQ,EACjBnB,EAAO,QAAU,GACRmB,IAAQ,EACjBnB,EAAO,SAAW,GACTmB,IAAQ,IACjBnB,EAAO,QAAU,GACjBA,EAAO,SAAW,IACTmB,IAAQ,EACjBnB,EAAO,UAAY,GACVmB,IAAQ,GACjBnB,EAAO,UAAY,GACVmB,IAAQ,EACjBnB,EAAO,aAAe,GACbmB,IAAQ,GACjBnB,EAAO,aAAe,GACbmB,IAAQ,EACjBnB,EAAO,iBAAmB,GACjBmB,IAAQ,GACjBnB,EAAO,iBAAmB,KAEtBmB,IAAQ,IAAMA,IAAQ,KACxBnB,EAAO,QAAU,GACjBA,EAAO,MAAQ,KAGbmB,IAAQ,IAAMA,IAAQ,KACxBnB,EAAO,QAAU,GACjBA,EAAO,MAAQ,IAIbmB,IAAQ,IACVnB,EAAO,QAAU,GACjBA,EAAO,SAAW,GAClBA,EAAO,UAAY,GACnBA,EAAO,aAAe,GACtBA,EAAO,iBAAmB,IAIlC,CAEA,OAAOA,CACT,CAKO,SAASoB,EAAmBnE,EAAqC,CACtE,GAAI,OAAOA,GAAU,SACnB,MAAO,CAAA,EAGT,MAAMoE,EAAMpE,EAAM,OAElB,GAAIoE,IAAQ,EACV,MAAO,CAAA,EAWT,IAAIC,EAAc,EACdC,EAAkB,EAClBC,EAAgB,EAEhBC,EAAoB,EAEpBC,EAAkB,EACtB,MAAM1B,EAA8B,CAAA,EAEpC,KAAOsB,EAAcD,IAGnBE,EAAkBtE,EAAM,QAAQ,OAAQqE,CAAW,EAE/CC,IAAoB,KALA,CAgBxB,GALAE,EAAoBxE,EAAM,QAAQ,OAAQqE,CAAW,EACrDI,EAAkBzE,EAAM,QAAQ,MAAOwE,CAAiB,EACpDC,IAAoB,KACtBA,GAAmB,GAGnBH,EAAkBE,GAClBF,EAAkBG,EAClB,CAEAJ,EAAcI,EACd,QACF,CAKIH,EAAkBD,IACpBtB,EAAO,KAAK/C,EAAM,UAAUqE,EAAaC,CAAe,CAAC,EACzDD,EAAcC,GAMhBA,GAAmB,EAEnB,IAAII,EAAO1E,EAAM,WAAWsE,CAAe,EAC3C,KAAOA,EAAkBF,IAAQM,EAAO,IAAMA,EAAO,MACnDJ,IACAI,EAAO1E,EAAM,WAAWsE,CAAe,EAOzC,MAAMK,EAAwBd,EAC5B7D,EAAM,UAAUqE,EAAaC,EAAkB,CAAC,CAAA,EAElDvB,EAAO,KAAK4B,CAAgB,EAK5BN,EAAcC,EAAkB,EAEhCC,EAAgBF,CAClB,CAEA,OAAIE,EAAgBH,GAClBrB,EAAO,KAAK/C,EAAM,OAAOuE,CAAa,CAAC,EAGlCxB,CACT,CAMO,SAAS6B,EACdC,EACAC,EACA,CACA,MAAM/B,EAAS,CAAA,EACf,IAAIgC,EAAuB,CACzB,MAAO,GACP,MAAO,GACP,QAAS,GACT,SAAU,GACV,UAAW,GACX,aAAc,GACd,iBAAkB,EAAA,EAGpB,QAAS7D,EAAI,EAAGA,EAAI2D,EAAe,OAAQ3D,IAAK,CAC9C,MAAM8D,EAAeH,EAAe3D,CAAC,EACrC,GAAI,OAAO8D,GAAiB,SAE1B,GACE,CAACD,EAAa,OACd,CAACA,EAAa,OACd,CAACA,EAAa,SACd,CAACA,EAAa,UACd,CAACA,EAAa,WACd,CAACA,EAAa,cACd,CAACA,EAAa,iBAEdhC,EAAO,KACLkC,EAAAA,IAAC,MAAA,CACC,wBAAyB,CAAE,OAAQD,CAAA,CAAa,EAC3C,GAAGF,CAAG,IAAI5D,CAAC,EAAA,CAClB,MAEG,CACL,MAAMgE,EAAa,CAAA,EAEf,OAAOH,EAAa,OAAU,UAChCG,EAAW,KAAK,WAAWH,EAAa,KAAK,EAAE,EAE7C,OAAOA,EAAa,OAAU,UAChCG,EAAW,KAAK,WAAWH,EAAa,KAAK,EAAE,EAE7CA,EAAa,SACfG,EAAW,KAAK,WAAW,EAEzBH,EAAa,UACfG,EAAW,KAAK,YAAY,EAE1BH,EAAa,WACfG,EAAW,KAAK,aAAa,EAE3BH,EAAa,cACfG,EAAW,KAAK,gBAAgB,EAE9BH,EAAa,kBACfG,EAAW,KAAK,oBAAoB,EAGtCnC,EAAO,WACJ,OAAA,CAAK,UAAWmC,EAAW,KAAK,GAAG,EAAI,SAAAF,CAAA,CAAa,CAAA,CAEzD,SACSA,EAAa,yBAA0B,CAEhD,MAAMG,EAAY,CAAE,GAAGJ,CAAA,EAEnBC,EAAa,UACfG,EAAU,MAAQ,IAEhBH,EAAa,UACfG,EAAU,MAAQ,IAGhB,OAAOH,EAAa,OAAU,WAChCG,EAAU,MAAQH,EAAa,OAE7B,OAAOA,EAAa,OAAU,WAChCG,EAAU,MAAQH,EAAa,OAG7BA,EAAa,UAAY,SAC3BG,EAAU,QAAUH,EAAa,SAG/BA,EAAa,WAAa,SAC5BG,EAAU,SAAWH,EAAa,UAGhCA,EAAa,YAAc,SAC7BG,EAAU,UAAYH,EAAa,WAGjCA,EAAa,eAAiB,SAChCG,EAAU,aAAeH,EAAa,cAGpCA,EAAa,mBAAqB,SACpCG,EAAU,iBAAmBH,EAAa,kBAG5CD,EAAeI,CACjB,CACF,CAEA,OAAOpC,CACT,CC1TO,MAAMqC,EAAcC,EAAAA,KAAK,SAAqBC,EAAyB,CAC5E,MAAMC,EAAU,eAAeD,EAAM,SAAS,kBAAkBA,EAAM,MAAM,GACtEE,EAAK,OAAOF,EAAM,MAAM,IAAIA,EAAM,UAAU,GAClD,OACEL,EAAAA,IAAC,MAAA,CACC,MAAO,CAAE,WAAY,OAAQ,OAAQ,MAAA,EACrC,UAAU,sBAEV,SAAAQ,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACb,SAAA,CAAAR,EAAAA,IAAC,IAAA,CACC,UAAU,sBACV,GAAAO,EACA,KAAM,GAAGD,CAAO,IAAIC,CAAE,GACtB,QAAS,IAAM,CAOb,QAAQ,aAAa,GAAI,GAAID,CAAO,CACtC,EACA,MAAO,CACL,MAAO,KAAK,IAAI,EAAI,OAAOD,EAAM,UAAU,EAAE,OAAQ,EAAE,EAAI,IAAA,EAG5D,SAAAA,EAAM,UAAA,CAAA,EAETL,EAAAA,IAAC,MAAA,CAAI,UAAU,eACZ,SAAAL,EACCT,EAAmBrC,EAAYwD,EAAM,QAASI,CAAgB,CAAC,EAC/DF,CAAA,CACF,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAGN,CAAC,ECxCD,SAASG,GAAmB,CAE1B,MAAO,CAAC,OAAO,SAAS,KAAK,WAAW,OAAO,CACjD,CAEA,SAAwBC,GAAiB,CACvC,KAAAC,EACA,UAAAC,EACA,mBAAAC,EACA,mBAAAC,CACF,EAA0B,CACxB,MAAMC,EAAiBC,EAAAA,OAAsB,IAAI,EAC3C,CAACC,EAAeC,CAAgB,EAAIC,EAAAA,SAAS,EAAK,EAExDC,EAAAA,UAAU,IACD,IAAM,CACPL,EAAe,SACjB,cAAcA,EAAe,OAAO,CAExC,EACC,CAAA,CAAE,EAELK,EAAAA,UAAU,IAAM,CACVT,EAAK,QAAUU,EAAO,SACxBP,EAAmBH,EAAK,EAAE,CAE9B,EAAG,CAACA,EAAK,GAAIA,EAAK,MAAOG,CAAkB,CAAC,EAE5CM,EAAAA,UAAU,IAAM,CACVH,GAAiBL,EAAU,MAAM,OAAS,GAAKH,KAE7CG,EAAU,OACZ,sBAAsB,IAAM,CAC1B,GAAI,CAACH,IAAoB,OACzB,MAAMa,EAAe,SAAS,gBAAgB,aAC9C,OAAO,SAAS,CAAE,IAAKA,CAAA,CAAc,CACvC,CAAC,CAGP,EAAG,CAACL,EAAeL,EAAU,KAAK,CAAC,EAEnCQ,EAAAA,UAAU,IAAM,CACd,GAAI,CAACX,IAAoB,OACzB,MAAMc,EAAe,IAAM,CACzB,GAAI,CAACd,IAAoB,CACvB,OAAO,oBAAoB,SAAUc,CAAY,EACjDL,EAAiB,EAAK,EACtB,MACF,CACA,MAAMM,EAAiB,OAAO,QAAU,OAAO,YAEzCC,EADa,SAAS,KAAK,aACDD,EAAiB,IAEjDN,EAAiBO,CAAU,CAC7B,EAEA,cAAO,iBAAiB,SAAUF,CAAY,EACvC,IAAM,OAAO,oBAAoB,SAAUA,CAAY,CAChE,EAAG,CAAA,CAAE,EAELH,EAAAA,UAAU,IAAM,CACd,MAAMM,EACJf,EAAK,QAAUU,EAAO,SAAWT,EAAU,QAAU,EAEnDK,GAAiBS,EACdX,EAAe,UAClBA,EAAe,QAAU,OAAO,YAAY,IAAM,CAChDF,EAAmBF,EAAK,GAAIgB,CAAgB,CAC9C,EAAGC,CAAa,GAETb,EAAe,UACxB,cAAcA,EAAe,OAAO,EACpCA,EAAe,QAAU,KAE7B,EAAG,CAACE,EAAeN,EAAMC,EAAWC,CAAkB,CAAC,EAEvD,KAAM,CAACgB,EAAiBC,CAAkB,EAAIX,EAAAA,SAC5C,OAAO,SAAS,KAAK,WAAW,OAAO,CAAA,EAEzCC,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAI,CAACS,EAAiB,OACtB,IAAIE,EAAO,OAAO,SAAS,KAC3B,GAAI,CAACA,EAAK,WAAW,OAAO,EAAG,OAC/B,GAAI,CAACC,EAAYC,CAAc,EAAIF,EAAK,MAAM,CAAC,EAAE,MAAM,GAAG,EAC1D,GAAIE,GAAkBD,IAAerB,EAAK,GAAI,CAE5CmB,EAAmB,EAAK,EACxB,MACF,CACKG,IAEHA,EAAiBD,EACjBA,EAAarB,EAAK,GAClBoB,EAAO,QAAQC,CAAU,IAAIC,CAAc,GAC3C,SAAS,KAAOF,GAElB,MAAMG,EAAU,SAAS,eAAeH,EAAK,MAAM,CAAC,CAAC,EAChDG,IACLA,EAAQ,eAAe,CAAE,SAAU,SAAU,MAAO,SAAU,EAG9D,SAAS,KAAO,GAChB,SAAS,KAAOH,EAEhBD,EAAmB,EAAK,EAC1B,EAAG,CAACD,EAAiBlB,EAAK,GAAIC,EAAU,KAAK,CAAC,EAG5Cb,MAAC,OAAI,KAAK,MACP,WAAU,MAAM,IAAI,CAAC9B,EAASkE,IAC7BpC,EAAAA,IAACG,EAAA,CAEC,WAAY,OAAOiC,CAAK,EACxB,QAAAlE,EACA,OAAQ0C,EAAK,GACb,UAAWC,EAAU,SAAA,EAJhBuB,CAAA,CAMR,EACH,CAEJ","x_google_ignoreList":[0]}